{{define "title"}}Victims{{end}}
{{define "content"}}
<div class="container">
    <div class="row">
        <div class="col-md-12">
            <h1 class="display-4 fw-bold">Admin Dashboard</h1>
          </div>
    </div>
</div>
{{if eq .Data.victims.TotalPages 0}} 
<div class="container mt-4">
    <div class="alert alert-info" role="alert">
        <h4 class="alert-heading">No Victims Found</h4>
        <p>There are currently no victims captured. Please wait for new victims to be added.</p>
    </div>
</div>
{{else}}
  <table class="table table-striped table-hover mt-4">
    <thead>
        <tr>
            <th scope="col">#</th>
            <th scope="col">IP</th>
            <th scope="col">Status</th>
            <th scope="col">Created At</th>
            <th scope="col">Services</th>
        </tr>
    </thead>
    <tbody>
        {{range $victim := .Data.victims.Items}}
        <tr>
            <th scope="row">{{$victim.ID}}</th>
            <td>{{$victim.IP}}</td>
            {{if $victim.Status}}
                <td class="text-success"><strong>Captured</strong></td>
            {{else}}
                <td class="text-warning"><strong>Not Captured</strong></td>
            {{end}}
            <td>{{$victim.CreatedAt.Format "2006-01-02 15:04:05"}}</td>
            {{if $victim.Status }}
            <td><a href="/dashboard/{{$victim.ID}}" class="btn btn-primary btn-sm">View Services</a></td>
            {{else}}
            <td><span class="text-muted">Not Available</span></td>
            {{end}}
        </tr>
        {{end}}
    </tbody>
</table>
<nav>
    <ul class="pagination">
      {{$active := ""}}
      {{range $index := .Data.victims.TotalPages|iterate}}
      {{if eq $index $.Data.victims.Page}}
      {{$active := "active"}}
      <li class="page-item {{$active}}">
      {{end}}
        {{if eq $index $.Data.victims.Page}}
        <span class="page-link">{{$index}}</span>
        {{else}}
        <a class="page-link" href="/dashboard?page={{$index}}">{{$index}}</a>
        {{end}}
      </li>
      {{end}}
    </ul>
</nav>
{{end}}
{{end}}


